<mat-toolbar color="primary" class="fixed-toolbar fixed-toolbar-bottom">
  <ng-container *ngIf="playerService.stationSelected">
    <img class="station-icon-thumb" [src]="(playerService.nowPlaying$ | async).station.iconUrl" (click)="onNowPlayingClicked()" (error)="onImgError($event.target)" >
    <blr-player-bar-station-info [nowPlaying]="playerService.nowPlaying$ | async" class="station-info" (click)="onNowPlayingClicked()"></blr-player-bar-station-info>
    <span class="fill-remaining"></span>
    <div *ngIf="(keepAwakeService.enabled$ | async) == true" class="indicator-icon large-screen-only" matTooltip="Keep Awake is enabled.  This will attempt to keep the screen from locking on mobile devices.">
      <mat-icon>settings_cell</mat-icon>
    </div>
    <div *ngIf="(sleepTimerService.minutesUntilSleep$ | async) != null" class="indicator-icon large-screen-only" matTooltip="Minutes until going to sleep">
      <mat-icon>timer</mat-icon> {{sleepTimerService.minutesUntilSleep$ | async}}
    </div>
    <button mat-icon-button [matMenuTriggerFor]="menu">
      <mat-icon>more_vert</mat-icon>
    </button>
    <button *ngIf="playerService.paused | async" mat-fab color="accent" (click)="playerService.play()" matTooltip="Play the selected station">
      <mat-icon>play_arrow</mat-icon>
    </button>
    <button *ngIf="!(playerService.paused | async)" mat-fab color="accent" (click)="playerService.pause()" matTooltip="Pause the currently playing station">
      <mat-icon>pause</mat-icon>
    </button>
  </ng-container>
</mat-toolbar>

<mat-menu #menu="matMenu">
  <button mat-menu-item [matMenuTriggerFor]="sleepTimerMenu.menu">
    <mat-icon>timer</mat-icon>
    <span>Sleep Timer</span>
  </button>
  <button *ngIf="(keepAwakeService.enabled$ | async) == false" (click)="keepAwakeService.enable()" mat-menu-item matTooltip="Enable Keep Awake.  This will attempt to keep the screen from locking on mobile devices.">
    <mat-icon>settings_cell</mat-icon>
    <span>Enable Keep Awake</span>
  </button>
  <button *ngIf="(keepAwakeService.enabled$ | async) == true" (click)="keepAwakeService.disable()" mat-menu-item>
    <mat-icon>settings_cell</mat-icon>
    <span>Disable Keep Awake</span>
  </button>
  <button mat-menu-item>
    <mat-icon>open_in_new</mat-icon>
    <span>Action 2</span>
  </button>
  <button mat-menu-item>
    <mat-icon>favorite</mat-icon>
    <span>Action 3</span>
  </button>
</mat-menu>

<blr-sleep-timer-menu #sleepTimerMenu (timerSelected)="onTimerSelected($event)"></blr-sleep-timer-menu>